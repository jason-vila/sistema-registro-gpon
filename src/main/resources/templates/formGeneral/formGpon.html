<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="layout :: layoutBase(~{::contenido})">

<div class="container mt-5" th:fragment="contenido">

    <div class="card shadow p-4">
        <h3 class="mb-4">Registro por pasos</h3>

        <form id="multiStepForm">
            <!-- Paso 1 -->
            <div class="form-step active">
                <div class="mb-3">
                    <label for="nombre" class="form-label">Nombre completo</label>
                    <input type="text" class="form-control" id="nombre" required />
                </div>
                <div class="mb-3">
                    <label for="email" class="form-label">Correo electrÃ³nico</label>
                    <input type="email" class="form-control" id="email" required />
                </div>
                <button type="button" class="btn btn-primary next-step">
                    Siguiente
                </button>
            </div>

            <!-- Paso 2 -->
            <div class="form-step">
                <div class="mb-3">
                    <label for="telefono" class="form-label">TelÃ©fono</label>
                    <input type="tel" class="form-control" id="telefono" required />
                </div>
                <div class="mb-3">
                    <label for="direccion" class="form-label">DirecciÃ³n</label>
                    <input type="text" class="form-control" id="direccion" required />
                </div>
                <button type="button" class="btn btn-secondary prev-step">
                    Anterior
                </button>
                <button type="button" class="btn btn-primary next-step">
                    Siguiente
                </button>
            </div>

            <!-- Paso 3 -->
            <div class="form-step">
                <div class="mb-3">
                    <label for="mensaje" class="form-label">Mensaje adicional</label>
                    <textarea class="form-control" id="mensaje" rows="4"></textarea>
                </div>
                <button type="button" class="btn btn-secondary prev-step">
                    Anterior
                </button>
                <button type="submit" class="btn btn-success">Enviar</button>
            </div>
        </form>
    </div>

    <script>
        const steps = document.querySelectorAll(".form-step");
        let currentStep = 0;

        document.querySelectorAll(".next-step").forEach((btn) => {
          btn.addEventListener("click", () => {
            if (validarPaso(currentStep)) {
              steps[currentStep].classList.remove("active");
              currentStep++;
              steps[currentStep].classList.add("active");
            }
          });
        });

        document.querySelectorAll(".prev-step").forEach((btn) => {
          btn.addEventListener("click", () => {
            steps[currentStep].classList.remove("active");
            currentStep--;
            steps[currentStep].classList.add("active");
          });
        });

        document
          .getElementById("multiStepForm")
          .addEventListener("submit", function (e) {
            e.preventDefault();
            alert("Formulario enviado correctamente ðŸŽ‰");
            this.reset();
            steps[currentStep].classList.remove("active");
            currentStep = 0;
            steps[currentStep].classList.add("active");
          });

        function validarPaso(paso) {
          const inputs = steps[paso].querySelectorAll("input, textarea");
          for (let input of inputs) {
            if (!input.checkValidity()) {
              input.classList.add("is-invalid");
              return false;
            } else {
              input.classList.remove("is-invalid");
            }
          }
          return true;
        }
    </script>
</div>

</html>
